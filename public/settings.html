<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/particles.css">
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/particles.css" />
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-R26WEY1GMN"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-R26WEY1GMN");
    </script>
    <title>Velara</title>
  </head>
  <body>
    <div id="particles-js"></div>
    <nav class="navbar">
      <ul class="navbar-links left">
        <li>
          <a href="/index.html"
            ><span class="material-icons"></span> VELARA
          </a>
        </li>
      </ul>
      <ul class="navbar-links right">
        <li>
          <a href="/g"><span class="material-icons">videogame_asset</span> GAMES</a>
        </li>
        <li>
          <a href="/a"><span class="material-icons">apps</span> APPS</a>
        </li>
        <li>
          <a href="/!"><span class="material-icons">search</span> SEARCH</a>
        </li>
        <li>
          <a href="/s"><span class="material-icons">settings</span> SETTINGS</a>
        </li>
      </ul>
    </nav>
    <div id="particles-js"></div>


    <div style="text-align: center; align-content: center;" class="settings-container">
      <section id="panicKeySettings" class="settings-section">
        <h2>Panic Key Settings</h2>
        <p id="currentPanicKey">Current Panic Key: 2</p>
        <p id="instruction">Press the button below to change your panic key.</p>
        <button style="display: block; margin: 0 auto;" onclick="changePanicKey()">Change Panic Key</button>
      </section>

      <section id="tabCustomization" class="settings-section">
        <h2>Tab Customization</h2>
        <form id="tabForm">
          <label for="tabTitle">Tab Title:</label>
          <input
            type="text"
            id="tabTitle"
            name="tabTitle"
            placeholder="Enter new tab title"
          />

          <label for="tabFavicon">Tab Favicon:</label>
          <label for="tabFavicon" class="file-upload-label">
            <span>Choose File</span>
            <input
              type="file"
              id="tabFavicon"
              name="tabFavicon"
              accept="image/png, image/jpeg"
              class="file-upload-input"
            />
          </label>

          <button style="display: block; margin: 0 auto;" type="submit">Update Tab</button>
          <button style="display: block; margin: 0 auto;" type="button" id="resetTab">Reset Tab</button>
        </form>
      </section>


    </div>

    
    <!-- scripts -->
    <script>
      window.addEventListener("load", function () {
        const savedTitle = localStorage.getItem("tabTitle");
        const savedFavicon = localStorage.getItem("favicon");

        if (savedTitle) {
          document.title = savedTitle;
          document.getElementById("tabTitle").value = savedTitle;
        }

        if (savedFavicon) {
          const favicon = document.getElementById("favicon");
          favicon.href = savedFavicon;
        }
      });

      document.getElementById("currentPanicKey").innerText =
        "Current Panic Key: " + (localStorage.getItem("panicKey") || "2");

      function changePanicKey() {
        const newKey = prompt("Enter your new Panic Key:");
        if (newKey) {
          localStorage.setItem("panicKey", newKey);
          document.getElementById("currentPanicKey").innerText =
            "Current Panic Key: " + newKey;
          alert("Panic Key updated successfully!");
        }
      }

      const tabForm = document.getElementById("tabForm");
      tabForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const newTitle = document.getElementById("tabTitle").value;
        const faviconInput = document.getElementById("tabFavicon");

        if (newTitle) {
          document.title = newTitle;
          localStorage.setItem("tabTitle", newTitle);
        }

        if (faviconInput.files && faviconInput.files[0]) {
          const reader = new FileReader();
          reader.onload = function (event) {
            const favicon = document.getElementById("favicon");
            favicon.href = event.target.result;
            localStorage.setItem("favicon", event.target.result);
          };
          reader.readAsDataURL(faviconInput.files[0]);
        }

        alert("Tab customization updated!");
      });

      const resetTabButton = document.getElementById("resetTab");
      resetTabButton.addEventListener("click", function () {
        document.title = "Velara";
        document.title = "Velara"; 
        localStorage.removeItem("tabTitle");
        document.getElementById("tabTitle").value = "";

        const favicon = document.getElementById("favicon");
        favicon.href = "favicon.ico";
        favicon.href = "favicon.ico"; 
        localStorage.removeItem("favicon");

        alert("Tab customization reset to default!");
      });

      let animationFrameId;
      let lastFrameTime = performance.now();
      let fpsCounter = document.getElementById("fps");
      let cpuCounter = document.getElementById("cpu");

      function toggleDebugMode() {
        const debugStats = document.getElementById("debugStats");
        if (debugStats.style.display === "none") {
          debugStats.style.display = "block";
          startDebugging();
          startDebugging(); 
        } else {
          debugStats.style.display = "none";
          stopDebugging();
          stopDebugging(); 
        }
      }

      function startDebugging() {
        lastFrameTime = performance.now();
        lastFrameTime = performance.now(); 
        updateFPS();
      }

      function stopDebugging() {
        cancelAnimationFrame(animationFrameId);
      }

      function updateFPS() {
        const now = performance.now();
        const delta = now - lastFrameTime;
        const fps = Math.round(1000 / delta);
        lastFrameTime = now;

        let cpuUsage = 0;
        const memory = performance.memory;
        if (memory) {
          const usedMemory =
            (memory.usedJSHeapSize / memory.totalJSHeapSize) * 100;
          cpuUsage = Math.round(usedMemory);
        }

        fpsCounter.textContent = fps;
        cpuCounter.textContent = cpuUsage + "%";

        animationFrameId = requestAnimationFrame(updateFPS);
      }
    </script>

    <!-- Other Scripts -->
    <script src="scripts/cloak.js"></script>
    <script src="scripts/settings.js"></script>
    <script src="scripts/particles.js"></script>
    <script src="scripts/panic.js"></script>
  </body>
</html>
